/*!
 * chartjs-plugin-zoom
 * http://chartjs.org/
 * Version: 0.6.3
 *
 * Copyright 2016 Evert Timberg
 * Released under the MIT license
 * https://github.com/chartjs/chartjs-plugin-zoom/blob/master/LICENSE.md
 */
(function e(b,g,d){function c(m,j){if(!g[m]){if(!b[m]){var i=typeof require=="function"&&require;if(!j&&i){return i(m,!0)}if(a){return a(m,!0)}var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var h=g[m]={exports:{}};b[m][0].call(h.exports,function(l){var o=b[m][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[m].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(b,c,a){},{}],2:[function(j,a,A){var z=j("hammerjs");z=typeof(z)==="function"?z:window.Hammer;var s=j("chart.js");s=typeof(s)==="function"?s:window.Chart;var q=s.helpers;var b=s.Zoom=s.Zoom||{};var f=b.zoomFunctions=b.zoomFunctions||{};var p=b.panFunctions=b.panFunctions||{};var t=b.defaults={pan:{enabled:true,mode:"xy",speed:20,threshold:10},zoom:{enabled:true,mode:"xy",sensitivity:3}};function h(C,B){if(C===undefined){return true}else{if(typeof C==="string"){return C.indexOf(B)!==-1}}return false}function n(C,B){if(C.scaleAxes&&C.rangeMax&&!q.isNullOrUndef(C.rangeMax[C.scaleAxes])){var D=C.rangeMax[C.scaleAxes];if(B>D){B=D}}return B}function x(B,C){if(B.scaleAxes&&B.rangeMin&&!q.isNullOrUndef(B.rangeMin[B.scaleAxes])){var D=B.rangeMin[B.scaleAxes];if(C<D){C=D}}return C}function o(E,L,B,J){var H=E.chart.data.labels;var I=E.minIndex;var C=H.length-1;var F=E.maxIndex;var D=J.sensitivity;var G=E.isHorizontal()?E.left+(E.width/2):E.top+(E.height/2);var K=E.isHorizontal()?B.x:B.y;b.zoomCumulativeDelta=L>1?b.zoomCumulativeDelta+1:b.zoomCumulativeDelta-1;if(Math.abs(b.zoomCumulativeDelta)>D){if(b.zoomCumulativeDelta<0){if(K>=G){if(I<=0){F=Math.min(C,F+1)}else{I=Math.max(0,I-1)}}else{if(K<G){if(F>=C){I=Math.max(0,I-1)}else{F=Math.min(C,F+1)}}}b.zoomCumulativeDelta=0}else{if(b.zoomCumulativeDelta>0){if(K>=G){I=I<F?I=Math.min(F,I+1):I}else{if(K<G){F=F>I?F=Math.max(I,F-1):F}}b.zoomCumulativeDelta=0}}E.options.ticks.min=x(J,H[I]);E.options.ticks.max=n(J,H[F])}}function w(E,Q,B,K){var R=E.options;var I;var O;if(E.isHorizontal()){I=E.right-E.left;O=(B.x-E.left)/I}else{I=E.bottom-E.top;O=(B.y-E.top)/I}var M=1-O;var G=I*(Q-1);var N=G*O;var J=G*M;var F=E.getValueForPixel(E.getPixelForValue(E.min)+N);var L=E.getValueForPixel(E.getPixelForValue(E.max)-J);var C=L.diff(F);var P=x(K,C)!=C;var D=n(K,C)!=C;if(!P&&!D){R.time.min=F;R.time.max=L}var H=R.time.min;localStorage.setItem("js_value_zoom_time_label_min",R.time.min.format("YYYY/MM/DD HH:mm:ss"));localStorage.setItem("js_value_zoom_time_label_max",R.time.max.format("YYYY/MM/DD HH:mm:ss"));localStorage.setItem("js_value_zoom_time_label","now Label "+R.time.min.format("YYYY/MM/DD HH:mm:ss")+" ~ "+R.time.max.format("YYYY/MM/DD HH:mm:ss")+" length "+H.fromNow())}function v(C,K,B,G){var E=C.max-C.min;var D=E*(K-1);var L=C.isHorizontal()?B.x:B.y;var J=(C.getValueForPixel(L)-C.min)/E;var H=1-J;var I=D*J;var F=D*H;C.options.ticks.min=x(G,C.min+I);C.options.ticks.max=n(G,C.max-F)}function m(F,E,B,D){var C=f[F.options.type];if(C){C(F,E,B,D)}}function y(D,I,B,H){var C=D.chartArea;if(!B){B={x:(C.left+C.right)/2,y:(C.top+C.bottom)/2}}var G=D.options.zoom;if(G&&q.getValueOrDefault(G.enabled,t.zoom.enabled)){var F=q.getValueOrDefault(D.options.zoom.mode,t.zoom.mode);G.sensitivity=q.getValueOrDefault(D.options.zoom.sensitivity,t.zoom.sensitivity);var E;if(F=="xy"&&H!==undefined){E=H}else{E="xy"}q.each(D.scales,function(J,K){if(J.isHorizontal()&&h(F,"x")&&h(E,"x")){G.scaleAxes="x";m(J,I,B,G)}else{if(!J.isHorizontal()&&h(F,"y")&&h(E,"y")){G.scaleAxes="y";m(J,I,B,G)}}});D.update(0)}}function i(E,K,J){var G=E.chart.data.labels;var B=G.length-1;var I=Math.max((E.ticks.length-((E.options.gridLines.offsetGridLines)?0:1)),1);var F=J.speed;var H=E.minIndex;var C=Math.round(E.width/(I*F));var D;b.panCumulativeDelta+=K;H=b.panCumulativeDelta>C?Math.max(0,H-1):b.panCumulativeDelta<-C?Math.min(B-I+1,H+1):H;b.panCumulativeDelta=H!==E.minIndex?0:b.panCumulativeDelta;D=Math.min(B,H+I-1);E.options.ticks.min=x(J,G[H]);E.options.ticks.max=n(J,G[D])}function g(F,H,D){var C=F.options;var G=n(D,F.getValueForPixel(F.getPixelForValue(F.max)-H));var B=x(D,F.getValueForPixel(F.getPixelForValue(F.min)-H));var E=H<0?G-F.max:B-F.min;C.time.max=F.max+E;C.time.min=F.min+E}function l(E,G,C){var D=E.options.ticks;var F=E.start,B=E.end;if(D.reverse){D.max=E.getValueForPixel(E.getPixelForValue(F)-G);D.min=E.getValueForPixel(E.getPixelForValue(B)-G)}else{D.min=E.getValueForPixel(E.getPixelForValue(F)-G);D.max=E.getValueForPixel(E.getPixelForValue(B)-G)}D.min=x(C,D.min);D.max=n(C,D.max)}function u(D,E,C){var B=p[D.options.type];if(B){B(D,E,C)}}function c(D,C,B){var E=D.options.pan;if(E&&q.getValueOrDefault(E.enabled,t.pan.enabled)){var F=q.getValueOrDefault(D.options.pan.mode,t.pan.mode);E.speed=q.getValueOrDefault(D.options.pan.speed,t.pan.speed);q.each(D.scales,function(G,H){if(G.isHorizontal()&&h(F,"x")&&C!==0){E.scaleAxes="x";u(G,C,E)}else{if(!G.isHorizontal()&&h(F,"y")&&B!==0){E.scaleAxes="y";u(G,B,E)}}});D.update(0)}}function d(C,B){return(B.x>=C.chartArea.left&&B.x<=C.chartArea.right)&&(B.y>=C.chartArea.top&&B.y<=C.chartArea.bottom)}function k(B){var E=B.scales;for(var C in E){var D=E[C];if(!D.isHorizontal()){return D}}}b.zoomFunctions.category=o;b.zoomFunctions.time=w;b.zoomFunctions.linear=v;b.zoomFunctions.logarithmic=v;b.panFunctions.category=i;b.panFunctions.time=g;b.panFunctions.linear=l;b.panFunctions.logarithmic=l;b.panCumulativeDelta=0;b.zoomCumulativeDelta=0;var r={afterInit:function(B){q.each(B.scales,function(C){C.originalOptions=JSON.parse(JSON.stringify(C.options))});B.resetZoom=function(){q.each(B.scales,function(E,F){var D=E.options.time;var C=E.options.ticks;if(D){delete D.min;delete D.max}if(C){delete C.min;delete C.max}E.options=q.configMerge(E.options,E.originalOptions)});q.each(B.data.datasets,function(C,D){C._meta=null});B.update()}},beforeInit:function(L){L.zoom={};var C=L.zoom.node=L.chart.ctx.canvas;var K=L.options;var G=q.getValueOrDefault(K.pan?K.pan.threshold:undefined,b.defaults.pan.threshold);if(!K.zoom||!K.zoom.enabled){return}if(K.zoom.drag){K.zoom.mode="x";L.zoom._mouseDownHandler=function(M){L.zoom._dragZoomStart=M};C.addEventListener("mousedown",L.zoom._mouseDownHandler);L.zoom._mouseMoveHandler=function(M){if(L.zoom._dragZoomStart){L.zoom._dragZoomEnd=M;L.update(0)}L.update(0)};C.addEventListener("mousemove",L.zoom._mouseMoveHandler);L.zoom._mouseUpHandler=function(M){if(L.zoom._dragZoomStart){var N=L.chartArea;var O=k(L);var S=L.zoom._dragZoomStart;var R=S.target.getBoundingClientRect().left;var Q=Math.min(S.clientX,M.clientX)-R;var V=Math.max(S.clientX,M.clientX)-R;var T=V-Q;var P=N.right-N.left;var U=1+((P-T)/P);if(T>0){y(L,U,{x:(T/2)+Q,y:(O.bottom-O.top)/2})}L.zoom._dragZoomStart=null;L.zoom._dragZoomEnd=null}};C.addEventListener("mouseup",L.zoom._mouseUpHandler)}else{L.zoom._wheelHandler=function(P){var O=P.target.getBoundingClientRect();var N=P.clientX-O.left;var Q=P.clientY-O.top;var M={x:N,y:Q};if(P.deltaY<0){y(L,1.1,M)}else{y(L,0.909,M)}P.preventDefault()};C.addEventListener("wheel",L.zoom._wheelHandler)}if(z){var J=new z.Manager(C);J.add(new z.Pinch());J.add(new z.Pan({threshold:G}));var F;var E=function E(Q){var U=1/(F)*Q.scale;var S=Q.target.getBoundingClientRect();var P=Q.center.x-S.left;var O=Q.center.y-S.top;var M={x:P,y:O};var T=Math.abs(Q.pointers[0].clientX-Q.pointers[1].clientX);var R=Math.abs(Q.pointers[0].clientY-Q.pointers[1].clientY);var N=T/R;var V;if(N>0.3&&N<1.7){V="xy"}else{if(T>R){V="x"}else{V="y"}}y(L,U,M,V);F=Q.scale};J.on("pinchstart",function(M){F=1});J.on("pinch",E);J.on("pinchend",function(M){E(M);F=null;b.zoomCumulativeDelta=0});var I=null,H=null,D=false;var B=function B(O){if(I!==null&&H!==null){D=true;var N=O.deltaX-I;var M=O.deltaY-H;I=O.deltaX;H=O.deltaY;c(L,N,M)}};J.on("panstart",function(M){I=0;H=0;B(M)});J.on("panmove",B);J.on("panend",function(M){I=null;H=null;b.panCumulativeDelta=0;setTimeout(function(){D=false},500)});L.zoom._ghostClickHandler=function(M){if(D){M.stopImmediatePropagation();M.preventDefault()}};C.addEventListener("click",L.zoom._ghostClickHandler);L._mc=J}},beforeDatasetsDraw:function(K){var J=K.chart.ctx;var B=K.chartArea;J.save();J.beginPath();if(K.zoom._dragZoomEnd){var C=k(K);var H=K.zoom._dragZoomStart;var G=K.zoom._dragZoomEnd;var F=H.target.getBoundingClientRect().left;var E=Math.min(H.clientX,G.clientX)-F;var I=Math.max(H.clientX,G.clientX)-F;var D=I-E;J.fillStyle="rgba(225,225,225,0.3)";J.lineWidth=5;J.fillRect(E,C.top,D,C.bottom-C.top)}J.rect(B.left,B.top,B.right-B.left,B.bottom-B.top);J.clip()},afterDatasetsDraw:function(B){B.chart.ctx.restore()},destroy:function(B){if(B.zoom){var C=B.options;var D=B.zoom.node;if(C.zoom&&C.zoom.drag){D.removeEventListener("mousedown",B.zoom._mouseDownHandler);D.removeEventListener("mousemove",B.zoom._mouseMoveHandler);D.removeEventListener("mouseup",B.zoom._mouseUpHandler)}else{D.removeEventListener("wheel",B.zoom._wheelHandler)}if(z){D.removeEventListener("click",B.zoom._ghostClickHandler)}delete B.zoom;var E=B._mc;if(E){E.remove("pinchstart");E.remove("pinch");E.remove("pinchend");E.remove("panstart");E.remove("pan");E.remove("panend")}}}};a.exports=r;s.pluginService.register(r)},{"chart.js":1,hammerjs:1}]},{},[2]);