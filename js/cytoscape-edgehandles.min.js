(function webpackUniversalModuleDefinition(a,b){if(typeof exports==="object"&&typeof module==="object"){module.exports=b(require("lodash.memoize"),require("lodash.throttle"))}else{if(typeof define==="function"&&define.amd){define(["lodash.memoize","lodash.throttle"],b)}else{if(typeof exports==="object"){exports.cytoscapeEdgehandles=b(require("lodash.memoize"),require("lodash.throttle"))}else{a.cytoscapeEdgehandles=b(a._["memoize"],a._["throttle"])}}}})(this,function(a,b){return(function(c){var d={};function e(g){if(d[g]){return d[g].exports}var f=d[g]={i:g,l:false,exports:{}};c[g].call(f.exports,f,f.exports,e);f.l=true;return f.exports}e.m=c;e.c=d;e.i=function(f){return f};e.d=function(g,h,f){if(!e.o(g,h)){Object.defineProperty(g,h,{configurable:false,enumerable:true,get:f})}};e.n=function(g){var f=g&&g.__esModule?function h(){return g["default"]}:function i(){return g};e.d(f,"a",f);return f};e.o=function(f,g){return Object.prototype.hasOwnProperty.call(f,g)};e.p="";return e(e.s=12)})([(function(d,c,e){d.exports=Object.assign!=null?Object.assign.bind(Object):function(i){for(var f=arguments.length,h=Array(f>1?f-1:0),g=1;g<f;g++){h[g-1]=arguments[g]}h.filter(function(j){return j!=null}).forEach(function(j){Object.keys(j).forEach(function(l){return i[l]=j[l]})});return i}}),(function(e,d,g){var f=g(10);var c=g(0);e.exports=function(h){var i=this;return new f(c({cy:i},h))}}),(function(d,c,g){function h(){this.saveGestureState();this.cy.zoomingEnabled(false).panningEnabled(false).boxSelectionEnabled(false);if(this.options.disableBrowserGestures){var i=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,i);window.addEventListener("touchmove",this.preventDefault,i);window.addEventListener("wheel",this.preventDefault,i)}return this}function f(){this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled);if(this.options.disableBrowserGestures){var i=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,i);window.removeEventListener("touchmove",this.preventDefault,i);window.removeEventListener("wheel",this.preventDefault,i)}return this}function e(){var i=this.cy;this.lastPanningEnabled=i.panningEnabled();this.lastZoomingEnabled=i.zoomingEnabled();this.lastBoxSelectionEnabled=i.boxSelectionEnabled();return this}d.exports={disableGestures:h,resetGestures:f,saveGestureState:e}}),(function(d,c,e){function f(){var i=this;var h=this.cy,g=this.options;this.addListener(h,"drag",function(){return i.grabbingNode=true});this.addListener(h,"free",function(){return i.grabbingNode=false});this.addListener(h,"mouseover","node",function(j){i.show(j.target)});this.addListener(h,"tap","node",function(k){var j=k.target;if(!j.same(i.handleNode)){i.show(j)}});this.addListener(h,"position","node",function(j){if(j.target.same(i.sourceNode)){i.hide()}});this.addListener(h,"tapstart","node",function(k){var j=k.target;if(j.same(i.handleNode)){i.start(i.sourceNode)}else{if(i.drawMode){i.start(j)}else{if(j.same(i.sourceNode)){i.hide()}}}});this.addListener(h,"tapdrag",function(j){i.update(j.position)});this.addListener(h,"tapdragover","node",function(j){i.preview(j.target)});this.addListener(h,"tapdragout","node",function(j){if(g.snap&&j.target.same(i.targetNode)){}else{i.unpreview(j.target)}});this.addListener(h,"tapend",function(){i.stop()});this.addListener(h,"remove",function(j){if(j.target.same(i.sourceNode)){i.hide()}});return this}d.exports={addCytoscapeListeners:f}}),(function(c,x,d){var m={preview:true,hoverDelay:150,handleNodes:"node",snap:false,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:false,disableBrowserGestures:true,handlePosition:function k(y){return"middle top"},handleInDrawMode:false,edgeType:function j(y,z){return"flat"},loopAllowed:function g(y){return false},nodeLoopOffset:-50,nodeParams:function r(y,z){return{}},edgeParams:function q(z,A,y){return{}},ghostEdgeParams:function v(){return{}},show:function w(y){},hide:function n(y){},start:function f(y){},complete:function o(y,A,z){},stop:function s(y){},cancel:function e(y,z){},hoverover:function i(y,z){},hoverout:function l(y,z){},previewon:function u(y,A,z){},previewoff:function t(y,A,z){},drawon:function h(){},drawoff:function p(){}};c.exports=m}),(function(f,d,h){function c(i){var k=this.cy,j=this.options;this.drawMode=i!=null?i:!this.drawMode;if(this.drawMode){this.prevUngrabifyState=k.autoungrabify();k.autoungrabify(true);if(!j.handleInDrawMode&&this.handleShown()){this.hide()}this.emit("drawon")}else{k.autoungrabify(this.prevUngrabifyState);this.emit("drawoff")}return this}function e(){return this.toggleDrawMode(true)}function g(){return this.toggleDrawMode(false)}f.exports={toggleDrawMode:c,enableDrawMode:e,disableDrawMode:g}}),(function(e,j,d){var h=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol==="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};var r=d(0);var c=function c(s){return(typeof s==="undefined"?"undefined":h(s))===h("")};var l=function l(s){return(typeof s==="undefined"?"undefined":h(s))===h([])&&s.length!=null};function g(v,u,t){var s={};r(s,u,v);r(s.data,u.data,v.data);if(c(u.classes)){s.classes=u.classes+" "+t}else{if(l(u.classes)){s.classes=u.classes.join(" ")+" "+t}else{s.classes=t}}return s}function o(){var C=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var v=this.cy,w=this.options,G=this.presumptiveTargets,s=this.previewEles,y=this.active;var E=this.sourceNode;var J=this.targetNode;var I=C?"eh-preview":"";var z=v.collection();var A=w.edgeType(E,J);if(!y){return}if(!A){return}if(C&&!w.preview){return}if(!J||J.size()===0){s.remove();this.emit("cancel",this.mp(),E,G);return}if(!C&&w.preview){s.removeClass("eh-preview").style("events","");this.emit("complete",this.mp(),E,J,s);return}var u=E.position();var t=J.position();var D=void 0;if(E.same(J)){D={x:u.x+w.nodeLoopOffset,y:u.y+w.nodeLoopOffset}}else{D={x:(u.x+t.x)/2,y:(u.y+t.y)/2}}if(A==="node"){var B=v.add(g({group:"nodes",position:D,style:{events:"no"}},w.nodeParams(E,J),I));var F=v.add(g({group:"edges",data:{source:E.id(),target:B.id()},style:{events:"no"}},w.edgeParams(E,J,0),I));var H=v.add(g({group:"edges",data:{source:B.id(),target:J.id()},style:{events:"no"}},w.edgeParams(E,J,1),I));z=z.merge(B).merge(F).merge(H)}else{var x=v.add(g({group:"edges",data:{source:E.id(),target:J.id()},style:{events:"no"}},w.edgeParams(E,J,0),I));z=z.merge(x)}if(C){this.previewEles=z}else{z.style("events","");this.emit("complete",this.mp(),E,J,z)}return this}function n(){this.makeEdges(true);return this}function q(){return this.previewEles.nonempty()&&this.previewEles.inside()}function f(){if(this.previewShown()){this.previewEles.remove()}return this}function i(){return this.handleNode.nonempty()&&this.handleNode.inside()}function m(){if(this.handleShown()){this.handleNode.remove()}return this}function p(y){var D=this;var I=this.options,z=this.cy;var A=h(I.handlePosition)===h("")?function(){return I.handlePosition}:I.handlePosition;var s=y.position();var B=y.outerHeight();var H=y.outerWidth();var x=0;var u=0;var F=A(y).toLowerCase().split(/\s+/);var v=F[0];var t=F[1];if(v==="left"){x=-(H/2)}else{if(v==="right"){x=H/2}}if(t==="top"){u=-(B/2)}else{if(t==="bottom"){u=B/2}}var E=this.hx=s.x+x;var C=this.hy=s.y+u;var G={x:E,y:C};if(this.handleShown()){this.handleNode.position(G)}else{z.batch(function(){D.handleNode=z.add({classes:"eh-handle",position:G,grabbable:false,selectable:false});D.handleNode.style("z-index",9007199254740991)})}return this}function k(){var u=this;var t=this.sourceNode,D=this.ghostNode,s=this.cy,B=this.mx,A=this.my,E=this.options;var z=B;var w=A;var C=void 0,v=void 0;if(!t){return}if(!D||D.length===0||D.removed()){v=this.ghostEles=s.collection();s.batch(function(){D=u.ghostNode=s.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}});D.style({"background-color":"blue",width:0.0001,height:0.0001,opacity:0,events:"no"});var x=E.ghostEdgeParams();C=s.add(r({},x,{group:"edges",data:r({},x.data,{source:t.id(),target:D.id()})}));C.addClass("eh-ghost eh-ghost-edge");C.style({events:"no"})});v.merge(D).merge(C)}D.position({x:z,y:w});return this}e.exports={makeEdges:o,makePreview:n,removePreview:f,previewShown:q,updateEdge:k,handleShown:i,setHandleFor:p,removeHandle:m}}),(function(d,c,f){function g(){if(this.options.noEdgeEventsInDraw){this.cy.edges().style("events","no")}return this}function e(){if(this.options.noEdgeEventsInDraw){this.cy.edges().style("events","")}return this}d.exports={disableEdgeEvents:g,enableEdgeEvents:e}}),(function(f,c,g){function e(){this.enabled=true;this.emit("enable");return this}function d(){this.enabled=false;this.emit("disable");return this}f.exports={enable:e,disable:d}}),(function(f,j,e){var n=e(13);function h(v){var D=this.options,C=this.previewEles,z=this.ghostEles,r=this.handleNode;var s=function s(E){return C.anySame(E)};var B=function B(E){return z.anySame(E)};var A=function A(E){return E.filter(D.handleNodes).length>0};var t=function t(E){return r.same(E)};var x=function x(E){return s(E)||t(E)||B(E)};var y=this.enabled,w=this.active,u=this.grabbingNode;return y&&!w&&!u&&(v==null||!x(v)&&A(v))}function d(r){return this.canStartOn(r)&&this.drawMode}function p(r){return this.canStartOn(r)&&!this.drawMode}function q(s){var r=this.options,t=this.drawMode;if(!this.canStartOn(s)||t&&!r.handleInDrawMode){return}this.sourceNode=s;this.setHandleFor(s);this.emit("show",this.hp(),this.sourceNode);return this}function l(){this.removeHandle();this.emit("hide",this.hp(),this.sourceNode);return this}function c(r){if(!this.canStartOn(r)){return}this.active=true;this.sourceNode=r;this.sourceNode.addClass("eh-source");this.disableGestures();this.disableEdgeEvents();this.emit("start",this.hp(),r)}function i(s){if(!this.active){return}var r=s;this.mx=r.x;this.my=r.y;this.updateEdge();this.throttledSnap();return this}function g(){if(!this.active||!this.options.snap){return false}var v=this.cy;var w=this.targetNode;var A=this.options.snapThreshold;var D=function D(I){var H=s(I);var G=H+A;return G*G};var E=this.mp();var z=function z(H,G){return(G.x-H.x)*(G.x-H.x)+(G.y-H.y)*(G.y-H.y)};var s=function s(G){return(G.outerWidth()+G.outerHeight())/4};var C=n(function(G){return z(G.position(),E)},function(G){return G.id()});var r=function r(G){return C(G)<=D(G)};var B=function B(H,G){return C(H)-C(G)};var F=false;var t=v.nodes(r).sort(B);var y=false;if(w.nonempty()&&!r(w)){this.unpreview(w)}for(var x=0;x<t.length;x++){var u=t[x];if(u.same(w)||this.preview(u,F)){y=true;break}}return y}function m(I){var D=this;var E=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var u=this.options,G=this.sourceNode,z=this.ghostNode,A=this.ghostEles,F=this.presumptiveTargets,s=this.previewEles,x=this.active;var C=G;var H=I.same(C);var w=u.loopAllowed(I);var v=I.same(z);var B=!u.edgeType(C,I);var y=I.same(this.handleNode);var t=I.same(this.targetNode);if(!x||y||v||B||t||H&&!w){return false}if(this.targetNode.nonempty()){this.unpreview(this.targetNode)}clearTimeout(this.previewTimeout);var r=function r(){D.targetNode=I;F.merge(I);I.addClass("eh-presumptive-target");I.addClass("eh-target");D.emit("hoverover",D.mp(),C,I);if(u.preview){I.addClass("eh-preview");A.addClass("eh-preview-active");G.addClass("eh-preview-active");I.addClass("eh-preview-active");D.makePreview();D.emit("previewon",D.mp(),C,I,s)}};if(E&&u.hoverDelay>0){this.previewTimeout=setTimeout(r,u.hoverDelay)}else{r()}return true}function k(w){if(!this.active||w.same(this.handleNode)){return}var r=this.previewTimeout,t=this.sourceNode,v=this.previewEles,s=this.ghostEles,x=this.cy;clearTimeout(r);this.previewTimeout=null;var u=t;w.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active");s.removeClass("eh-preview-active");t.removeClass("eh-preview-active");this.targetNode=x.collection();this.removePreview(u,w);this.emit("hoverout",this.mp(),u,w);this.emit("previewoff",this.mp(),u,w,v);return this}function o(){if(!this.active){return}var t=this.sourceNode,u=this.targetNode,s=this.ghostEles,r=this.presumptiveTargets;clearTimeout(this.previewTimeout);t.removeClass("eh-source");u.removeClass("eh-target eh-preview eh-hover");r.removeClass("eh-presumptive-target");this.makeEdges();this.removeHandle();s.remove();this.clearCollections();this.resetGestures();this.enableEdgeEvents();this.active=false;this.emit("stop",this.mp(),t);return this}f.exports={show:q,hide:l,start:c,update:i,preview:m,unpreview:k,stop:o,snap:g,canStartOn:h,canStartDrawModeOn:d,canStartNonDrawModeOn:p}}),(function(f,j,e){var i=e(4);var s=e(0);var r=e(14);var l=e(2);var o=e(3);var d=e(5);var q=e(6);var m=e(8);var h=e(9);var p=e(11);var c=e(7);function g(v){var y=v.cy;this.cy=y;this.listeners=[];this.enabled=true;this.drawMode=false;this.active=false;this.grabbingNode=false;this.handleNode=y.collection();this.clearCollections();this.hx=0;this.hy=0;this.hr=0;this.mx=0;this.my=0;this.options=s({},i,v);this.saveGestureState();this.addListeners();this.throttledSnap=r(this.snap.bind(this),1000/v.snapFrequency);this.preventDefault=function(z){return z.preventDefault()};var t=false;try{var x=Object.defineProperty({},"passive",{get:function u(){t=true}});window.addEventListener("test",null,x)}catch(w){}if(t){this.windowListenerOptions={capture:true,passive:false}}else{this.windowListenerOptions=true}}var k=g.prototype={};var n=function n(t){return s(k,t)};k.destroy=function(){this.removeListeners()};k.setOptions=function(t){s(this.options,t)};k.mp=function(){return{x:this.mx,y:this.my}};k.hp=function(){return{x:this.hx,y:this.hy}};k.clearCollections=function(){var t=this.cy;this.previewEles=t.collection();this.ghostEles=t.collection();this.ghostNode=t.collection();this.sourceNode=t.collection();this.targetNode=t.collection();this.presumptiveTargets=t.collection()};[l,o,d,q,m,h,p,c].forEach(n);f.exports=g}),(function(e,h,d){var f=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol==="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function k(){var n=this;this.addCytoscapeListeners();this.addListener(this.cy,"destroy",function(){return n.destroy()});return this}function j(){for(var o=this.listeners.length-1;o>=0;o--){var n=this.listeners[o];this.removeListener(n.target,n.event,n.selector,n.callback,n.options)}return this}function l(q,p,n,r,o){if((typeof n==="undefined"?"undefined":f(n))!==f("")){r=n;o=r;n=null}if(o==null){o=false}return{target:q,event:p,selector:n,callback:r,options:o}}function g(n){return n instanceof Element}function c(r,q,n,s,p){var o=l(r,q,n,s,p);this.listeners.push(o);if(g(o.target)){o.target.addEventListener(o.event,o.callback,o.options)}else{if(o.selector){o.target.addListener(o.event,o.selector,o.callback,o.options)}else{o.target.addListener(o.event,o.callback,o.options)}}return this}function i(t,s,o,u,q){var p=l(t,s,o,u,q);for(var r=this.listeners.length-1;r>=0;r--){var n=this.listeners[r];if(p.target===n.target&&p.event===n.event&&(p.selector==null||p.selector===n.selector)&&(p.callback==null||p.callback===n.callback)){this.listeners.splice(r,1);if(g(p.target)){p.target.removeEventListener(p.event,p.callback,p.options)}else{if(p.selector){p.target.removeListener(p.event,p.selector,p.callback,p.options)}else{p.target.removeListener(p.event,p.callback,p.options)}}break}}return this}function m(t,n){var q=this.options,u=this.cy;for(var o=arguments.length,p=Array(o>2?o-2:0),s=2;s<o;s++){p[s-2]=arguments[s]}u.emit({type:"eh"+t,position:n},p);var r=q[t];if(r!=null){r.apply(undefined,p)}return this}e.exports={addListener:c,addListeners:k,removeListener:i,removeListeners:j,emit:m}}),(function(e,d,g){var c=g(1);var f=function f(h){if(!h){return}h("core","edgehandles",c)};if(typeof cytoscape!=="undefined"){f(cytoscape)}e.exports=f}),(function(d,c){d.exports=a}),(function(d,c){d.exports=b})])});